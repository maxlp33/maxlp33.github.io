<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; object-src 'none';">
    <title>Sten Submachine Gun - Max Liu Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="project.css">
    <style>
        /* Click Spark Effect */
        .spark {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }

        .spark-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 100%);
            border-radius: 50%;
            animation: sparkAnimation 0.6s ease-out forwards;
        }

        @keyframes sparkAnimation {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: scale(0.2) rotate(180deg);
            }
        }
    </style>
</head>
<body>
    <!-- Starry Background -->
    <div class="starry-bg" id="starry-bg"></div>

    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-cube">
                    <div class="logo-cube-face front">ML</div>
                    <div class="logo-cube-face back">ML</div>
                    <div class="logo-cube-face right">M</div>
                    <div class="logo-cube-face left">L</div>
                    <div class="logo-cube-face top">ML</div>
                    <div class="logo-cube-face bottom">ML</div>
                </div>
            </a>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="index.html#about" class="nav-link" data-zh="ÈóúÊñºÊàë" data-en="About">About</a></li>
                <li><a href="index.html#projects" class="nav-link" data-zh="‰ΩúÂìÅÈõÜ" data-en="Projects">Projects</a></li>
                <li><a href="index.html#contact" class="nav-link" data-zh="ËÅØÁµ°Êàë" data-en="Contact">Contact</a></li>
            </ul>
            <div class="language-selector">
                <button class="language-btn" id="language-btn">
                    <span id="current-lang">English</span>
                    <span>‚ñº</span>
                </button>
                <div class="language-dropdown" id="language-dropdown">
                    <button class="language-option" data-lang="zh">‰∏≠Êñá</button>
                    <button class="language-option" data-lang="en">English</button>
                </div>
            </div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Project Header -->
    <section class="project-header">
        <div class="project-header-content">
            <h1 class="project-title-main">Sten Submachine Gun</h1>
            <p class="project-subtitle" data-zh="‰∫åÊà∞ÊôÇÊúüÁ∂ìÂÖ∏Ë°ùÈãíÊßçÁöÑÈ´òÊì¨Áúü 3D ÈáçÂª∫" data-en="High-Fidelity 3D Reconstruction of WWII-Era Submachine Gun">High-Fidelity 3D Reconstruction of WWII-Era Submachine Gun</p>
            <div class="project-meta">
                <span class="meta-item">üî´ 3D Modeling</span>
                <span class="meta-item">‚è±Ô∏è 6 Weeks</span>
                <span class="meta-item">üéØ Game Asset</span>
                <span class="meta-item">üõ†Ô∏è Blender & Substance</span>
            </div>
        </div>
    </section>

    <!-- Project Content -->
    <section class="project-content">
        <a href="index.html#projects" class="back-link">‚Üê Back to Projects</a>
        
        <!-- Gallery -->
        <div class="project-gallery">
            <div class="gallery-container">
                <div class="gallery-main-display">
                    <img id="main-gallery-image" src="img/Sten8.png" alt="Sten Gun Main View" class="main-gallery-image">
                </div>
                <div class="gallery-thumbnails">
                    <div class="thumbnail-item active" data-src="img/Sten8.png" data-alt="Sten Gun Main View">
                        <img src="img/Sten8.png" alt="Sten Gun Main View">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten1.png" data-alt="Sten Gun Detail 1">
                        <img src="img/Copy of Sten1.png" alt="Sten Gun Detail 1">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten2.png" data-alt="Sten Gun Detail 2">
                        <img src="img/Copy of Sten2.png" alt="Sten Gun Detail 2">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten4.png" data-alt="Sten Gun Technical">
                        <img src="img/Copy of Sten4.png" alt="Sten Gun Technical">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten5.png" data-alt="Sten Gun Wireframe">
                        <img src="img/Copy of Sten5.png" alt="Sten Gun Wireframe">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten6.png" data-alt="Sten Gun UV Map">
                        <img src="img/Copy of Sten6.png" alt="Sten Gun UV Map">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten10.png" data-alt="Sten Gun Model 10">
                        <img src="img/Copy of Sten10.png" alt="Sten Gun Model 10">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten_highpoly_AO.png" data-alt="Sten High Poly AO">
                        <img src="img/Copy of Sten_highpoly_AO.png" alt="Sten High Poly AO">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of Sten_wireframe.png" data-alt="Sten Wireframe View">
                        <img src="img/Copy of Sten_wireframe.png" alt="Sten Wireframe View">
                    </div>
                    <div class="thumbnail-item" data-src="img/Copy of StenUV.png" data-alt="Sten UV Mapping">
                        <img src="img/Copy of StenUV.png" alt="Sten UV Mapping">
                    </div>
                </div>
            </div>
        </div>

        <!-- Lightbox Modal -->
        <div id="lightbox" class="lightbox">
            <div class="lightbox-content">
                <span class="lightbox-close">&times;</span>
                <button class="lightbox-arrow lightbox-prev" onclick="changeLightboxImage(-1)">‚Äπ</button>
                <img id="lightbox-image" src="" alt="">
                <button class="lightbox-arrow lightbox-next" onclick="changeLightboxImage(1)">‚Ä∫</button>
                <div class="lightbox-counter">
                    <span id="current-image">1</span> / <span id="total-images">10</span>
                </div>
            </div>
        </div>

        <!-- Project Details -->
        <div class="project-details">
            <div class="detail-section">
                <h3 data-zh="È†ÖÁõÆÊ¶ÇËø∞" data-en="Project Overview">Project Overview</h3>
                <p data-zh="ÈÄôÊòØ‰∏ÄÂÄã‰ª•‰∫åÊà∞ÊôÇÊúüËã±Âúã Sten Ë°ùÈãíÊßçÁÇ∫‰∏ªÈ°åÁöÑ 3D Âª∫Ê®°È†ÖÁõÆ„ÄÇÊàëÂ∞àÊ≥®ÊñºÈáçÁèæÈÄôÊääÊ≠∑Âè≤Ê≠¶Âô®ÁöÑÊØè‰∏ÄÂÄãÁ¥∞ÁØÄÔºåÂæûÈáëÂ±¨Ë°®Èù¢ÁöÑÁ£®ÊêçÁóïË∑°Âà∞ÊßçË∫´ÁöÑÁ¥ãÁêÜË≥™ÊÑüÔºåÈÉΩÁ∂ìÈÅéÁ≤æÂøÉË£Ω‰Ωú‰ª•ÈÅîÂà∞ÊúÄÈ´òÁöÑË¶ñË¶∫ÁúüÂØ¶Â∫¶„ÄÇ" data-en="This is a 3D modeling project focused on the British Sten submachine gun from WWII. I concentrated on recreating every detail of this historical weapon, from metal surface wear patterns to the textures, all carefully crafted to achieve maximum visual realism.">This is a 3D modeling project focused on the British Sten submachine gun from WWII. I concentrated on recreating every detail of this historical weapon, from metal surface wear patterns to gun body textures, all carefully crafted to achieve maximum visual realism.</p>

                <p data-zh="Ë©≤Ê®°ÂûãÊé°Áî®Áèæ‰ª£ PBRÔºàÂü∫ÊñºÁâ©ÁêÜÁöÑÊ∏≤ÊüìÔºâÂ∑•‰ΩúÊµÅÁ®ãË£Ω‰ΩúÔºåÁ¢∫‰øùÂú®ÂêÑÁ®ÆÂÖâÁÖßÊ¢ù‰ª∂‰∏ãÈÉΩËÉΩÂëàÁèæÂá∫ÈÄºÁúüÁöÑÊùêË≥™ÊïàÊûú„ÄÇÁâπÂà•Ê≥®ÈáçÊ≠∑Âè≤Ê∫ñÁ¢∫ÊÄßÔºåÂèÉËÄÉ‰∫ÜÂ§ßÈáèÂè≤ÊñôÂíåÂØ¶Áâ©ÁÖßÁâá‰æÜÁ¢∫‰øùÊ®°ÂûãÁöÑÁúüÂØ¶ÊÄß„ÄÇ" data-en="The model was created using modern PBR (Physically Based Rendering) workflow, ensuring realistic material representation under various lighting conditions. Special attention was paid to historical accuracy, referencing extensive documentation and real-world photographs to ensure authenticity.">The model was created using modern PBR (Physically Based Rendering) workflow, ensuring realistic material representation under various lighting conditions. Special attention was paid to historical accuracy, referencing extensive documentation and real-world photographs to ensure authenticity.</p>
            </div>

            <div class="detail-section">
                <h3 data-zh="ÊäÄË°ìË¶èÊ†º" data-en="Technical Specifications">Technical Specifications</h3>
                <ul class="tech-list">
                    <li data-zh="üîß Blender 4.4 - ‰∏ªË¶ÅÂª∫Ê®°Â∑•ÂÖ∑" data-en="üîß Blender 4.4 - Primary Modeling Tool">üîß Blender 4.4 - Primary Modeling Tool</li>
                    <li data-zh="üé® Substance Painter - ÊùêË≥™Ë£Ω‰Ωú" data-en="üé® Substance Painter - Texture Creation">üé® Substance Painter - Texture Creation</li>
                    <li data-zh="üìê Èù¢Êï∏ÂÑ™Âåñ (80,000 Èù¢)" data-en="üìê Optimized (80,000 triangles)">üìê Optimized (80,000 triangles)</li>
                    <li data-zh="üñºÔ∏è 4K PBR ÊùêË≥™Ë≤ºÂúñ" data-en="üñºÔ∏è 4K PBR Texture Maps">üñºÔ∏è 4K PBR Texture Maps</li>
                    <li data-zh="‚öôÔ∏è ÈÅäÊà≤ÂºïÊìéÂ∞±Á∑íÊ†ºÂºè" data-en="‚öôÔ∏è Game Engine Ready Format">‚öôÔ∏è Game Engine Ready Format</li>
                    <li data-zh="üìè Á≤æÁ¢∫Ê≠∑Âè≤ÊØî‰æã" data-en="üìè Historically Accurate Proportions">üìè Historically Accurate Proportions</li>
                </ul>
            </div>
        </div>

        <!-- Process Section -->
        <div class="detail-section">
            <h3 data-zh="Ë£Ω‰ΩúÊµÅÁ®ã" data-en="Creation Process">Creation Process</h3>
            <p data-zh="È†ÖÁõÆÂæûÂª£Ê≥õÁöÑÁ†îÁ©∂ÈñãÂßãÔºåÊî∂ÈõÜÊ≠∑Âè≤Ë≥áÊñô„ÄÅÊäÄË°ìÂúñÁ¥ôÂíåÂèÉËÄÉÁÖßÁâá„ÄÇÂª∫Ê®°ÈöéÊÆµÊé°Áî®ÂÖàÈ´òÊ®°ÂæåÂÑ™ÂåñÁöÑÊñπÂºèÔºåÁ¢∫‰øùÁ¥∞ÁØÄÁöÑÂÆåÊï¥ÊÄßÂêåÊôÇÊªøË∂≥ÈÅäÊà≤ÊÄßËÉΩË¶ÅÊ±Ç„ÄÇÊùêË≥™Ë£Ω‰ΩúÁâπÂà•Ê≥®ÈáçÁúüÂØ¶ÁöÑÈáëÂ±¨ËÄÅÂåñÊïàÊûúÂíåÊú®Ë≥™Ë°®Èù¢ÁöÑËá™ÁÑ∂Á£®Êêç„ÄÇ" data-en="The project began with extensive research, gathering historical documentation, technical drawings, and reference photographs. The modeling phase used a high-to-low poly workflow, ensuring detail integrity while meeting game performance requirements. Material creation focused on realistic metal aging effects and natural wood surface wear.">The project began with extensive research, gathering historical documentation, technical drawings, and reference photographs. The modeling phase used a high-to-low poly workflow, ensuring detail integrity while meeting game performance requirements. Material creation focused on realistic metal aging effects and natural wood surface wear.</p>
        </div>
    </section>

    <script>
        // Language switching functionality
        let currentLanguage = 'en';
        
        function switchLanguage(lang) {
            currentLanguage = lang;
            const currentLangSpan = document.getElementById('current-lang');
            currentLangSpan.textContent = lang === 'zh' ? '‰∏≠Êñá' : 'English';
            
            document.querySelectorAll('[data-zh], [data-en]').forEach(element => {
                if (lang === 'zh' && element.hasAttribute('data-zh')) {
                    element.textContent = element.getAttribute('data-zh');
                } else if (lang === 'en' && element.hasAttribute('data-en')) {
                    element.textContent = element.getAttribute('data-en');
                }
            });
        }

        // Language selector functionality
        document.addEventListener('DOMContentLoaded', function() {
            const languageBtn = document.getElementById('language-btn');
            const languageDropdown = document.getElementById('language-dropdown');
            const languageOptions = document.querySelectorAll('.language-option');

            languageBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                languageDropdown.classList.toggle('active');
            });

            languageOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const selectedLang = this.getAttribute('data-lang');
                    switchLanguage(selectedLang);
                    languageDropdown.classList.remove('active');
                });
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                languageDropdown.classList.remove('active');
            });

            // Mobile menu toggle
            const menuToggle = document.getElementById('menu-toggle');
            const navMenu = document.getElementById('nav-menu');
            
            menuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });

            // Initialize page with English
            switchLanguage('en');
            
            // Gallery functionality
            const mainImage = document.getElementById('main-gallery-image');
            const thumbnails = document.querySelectorAll('.thumbnail-item');
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightbox-image');
            const lightboxClose = document.querySelector('.lightbox-close');
            const currentImageSpan = document.getElementById('current-image');
            const totalImagesSpan = document.getElementById('total-images');
            
            let currentImageIndex = 0;
            const galleryImages = Array.from(thumbnails).map(thumb => ({
                src: thumb.dataset.src,
                alt: thumb.dataset.alt
            }));
            
            // Update total images count
            totalImagesSpan.textContent = galleryImages.length;
            
            // Thumbnail click functionality
            thumbnails.forEach((thumb, index) => {
                thumb.addEventListener('click', () => {
                    // Update main image
                    mainImage.src = thumb.dataset.src;
                    mainImage.alt = thumb.dataset.alt;
                    
                    // Update active thumbnail
                    thumbnails.forEach(t => t.classList.remove('active'));
                    thumb.classList.add('active');
                    
                    // Update current index
                    currentImageIndex = index;
                });
            });
            
            // Main image click to open lightbox
            mainImage.addEventListener('click', () => {
                openLightbox(currentImageIndex);
            });
            
            // Lightbox functions
            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImage.src = galleryImages[index].src;
                lightboxImage.alt = galleryImages[index].alt;
                currentImageSpan.textContent = index + 1;
                lightbox.style.display = 'block';
                document.body.style.overflow = 'hidden';
                document.body.classList.add('lightbox-open');
            }
            
            function closeLightbox() {
                lightbox.style.display = 'none';
                document.body.style.overflow = 'auto';
                document.body.classList.remove('lightbox-open');
            }
            
            window.changeLightboxImage = function(direction) {
                currentImageIndex += direction;
                if (currentImageIndex < 0) currentImageIndex = galleryImages.length - 1;
                if (currentImageIndex >= galleryImages.length) currentImageIndex = 0;
                
                lightboxImage.src = galleryImages[currentImageIndex].src;
                lightboxImage.alt = galleryImages[currentImageIndex].alt;
                currentImageSpan.textContent = currentImageIndex + 1;
                
                // Update main display and thumbnails
                mainImage.src = galleryImages[currentImageIndex].src;
                mainImage.alt = galleryImages[currentImageIndex].alt;
                thumbnails.forEach(t => t.classList.remove('active'));
                thumbnails[currentImageIndex].classList.add('active');
            };
            
            // Close lightbox events
            lightboxClose.addEventListener('click', closeLightbox);
            
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (lightbox.style.display === 'block') {
                    if (e.key === 'Escape') {
                        closeLightbox();
                    } else if (e.key === 'ArrowLeft') {
                        changeLightboxImage(-1);
                    } else if (e.key === 'ArrowRight') {
                        changeLightboxImage(1);
                    }
                }
            });
            
            // Click Spark Effect - Minimalistic Burst
            function createSparkEffect(x, y) {
                const sparkContainer = document.createElement('div');
                sparkContainer.className = 'spark';
                sparkContainer.style.left = x + 'px';
                sparkContainer.style.top = y + 'px';
                
                // Create minimalistic burst with fewer particles
                const particleCount = 8;
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'spark-particle';
                    
                    // Add subtle size variation
                    const sizes = ['small', '', 'large'];
                    const randomSize = sizes[Math.floor(Math.random() * sizes.length)];
                    if (randomSize) particle.classList.add(randomSize);
                    
                    // Calculate burst direction
                    const angle = (360 / particleCount) * i + Math.random() * 20 - 10;
                    const distance = Math.random() * 40 + 20; // 20-60px travel distance
                    const radian = angle * Math.PI / 180;
                    
                    const endX = Math.cos(radian) * distance;
                    const endY = Math.sin(radian) * distance;
                    
                    // Set CSS custom properties for the animation
                    particle.style.setProperty('--end-x', endX + 'px');
                    particle.style.setProperty('--end-y', endY + 'px');
                    
                    // Small stagger for inside-to-outside effect but starts immediately
                    particle.style.animationDelay = (i * 0.02) + 's';
                    
                    sparkContainer.appendChild(particle);
                }
                
                document.body.appendChild(sparkContainer);
                
                // Remove after animation completes
                setTimeout(() => {
                    if (sparkContainer.parentNode) {
                        sparkContainer.parentNode.removeChild(sparkContainer);
                    }
                }, 2500);
            }
            
            // Add click event listener for spark effect
            document.addEventListener('click', (e) => {
                // Don't create sparks on certain elements to avoid conflicts
                if (!e.target.closest('.lightbox, .language-dropdown, .nav-menu')) {
                    createSparkEffect(e.clientX, e.clientY);
                }
            });
            
            // Create subtle starry background
            function createStarryBackground() {
                const starryBg = document.getElementById('starry-bg');
                const starCount = 120; // Subtle amount of stars
                
                for (let i = 0; i < starCount; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    
                    // Random position
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    
                    // Random size
                    const sizes = ['small', 'medium', 'large'];
                    const size = sizes[Math.floor(Math.random() * sizes.length)];
                    star.classList.add(size);
                    
                    // Random animation speed
                    const speeds = ['slow', 'fast', ''];
                    const speed = speeds[Math.floor(Math.random() * speeds.length)];
                    if (speed) star.classList.add(speed);
                    
                    // Random delay
                    star.style.animationDelay = Math.random() * 6 + 's';
                    
                    starryBg.appendChild(star);
                }
            }
            
            // Initialize starry background
            createStarryBackground();
            
            // Add error handling to all gallery images
            const galleryImageElements = document.querySelectorAll('.main-gallery-image, .thumbnail-item img');
            galleryImageElements.forEach(img => {
                img.addEventListener('error', function() {
                    console.log('Failed to load image:', this.src);
                    this.style.background = 'rgba(229, 229, 229, 0.1)';
                    this.style.display = 'flex';
                    this.style.alignItems = 'center';
                    this.style.justifyContent = 'center';
                    this.innerHTML = '<span style="color: #888; font-size: 14px;">Image not found</span>';
                });
                img.addEventListener('load', function() {
                    console.log('Successfully loaded:', this.src);
                });
            });
        });

        // Navbar scroll effect
        const navbar = document.getElementById('navbar');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>